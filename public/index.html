<html>
<head>
    <title>htmx Hello World!</title>
    <script src="/js/htmx.min.js"></script>
    <script defer src="/js/alpinejs.min.js"></script>
    <script src="/js/reload-client.js" type="module"></script>
    <script>
        window.onload = () => {
            document.body.addEventListener('htmx:configRequest', event => {
                event.detail.headers['X-Token'] = 'my-token';
            });
        };
    </script>
</head>
<body>
    <p>
        <button hx-get="/version" hx-target="#version">Get Bun Version</button>
        <div id="version"></div>
    </p>
    <p>
        <strong>
            <a href="https://pragprog.com/titles/mvhtmx/server-driven-web-apps-with-htmx/">
                Server-Driven Web Apps with htmx<br/>
                Any Language, Less Code, Simpler Code
            </a>
        </strong><br/>
        Author: R. Mark Volkmann<br/>
        Published by: The Pragmatic Programmers<br/>
        <a href="https://github.com/mvolkmann/htmx-examples">
            https://github.com/mvolkmann/htmx-examples
        </a>
    </p>
    <h1>"Your Turn" Examples</h1>
    <ul>
        <li>
            <strong>Boosting with <code>hx-boost</code></strong><br/>
            <a href="https://htmx.org/attributes/hx-boost/">https://htmx.org/attributes/hx-boost/</a>
            <p>
                Load an HTML page: <a href="boosting.html">without hx-boost</a>
                (<code>link</code> and <code>script</code> tags ARE processed), and
                <a href="boosting.html" hx-boost="true">with hx-boost</a>
                (<code>link</code> and <code>script</code> tags are NOT processed)
            </p>
        </li>
        <li>
            <strong>Lazy Loading with <code>hx-trigger</code></strong><br>
            <a href="https://htmx.org/attributes/hx-trigger/">https://htmx.org/attributes/hx-trigger/</a>
            <p>
                <ul>
                    <li><code>&lt;element hx-get="/some/content" hx-trigger="click"&gt;&lt;element&gt;</code></li>
                    <li><code>&lt;element hx-get="/some/content" hx-trigger="load"&gt;&lt;element&gt;</code></li>
                    <li><code>&lt;element hx-get="/some/content" hx-trigger="revealed"&gt;&lt;element&gt;</code></li>
                    <li><code>&lt;element hx-get="/some/content" hx-trigger="intersect"&gt;&lt;element&gt;</code></li>
                </ul>
            </p>
            <div>
                The following content was loaded using:<br/>
                <code>&lt;div hx-get="/lazy-loading.html" hx-trigger="load"&gt;&lt;/div&gt;</code>
                <hr/>
                <div hx-get="/lazy-loading.html" hx-trigger="load"></div>
                <hr/>
            </div>
        </li>
        <li>
            <strong>Input Validation with <code>hx-trigger</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-trigger">https://htmx.org/attributes/hx-trigger</a>
            <form action="get">
                <label for="ip-address">IP Address</label>
                <input id="ip-address"
                    hx-get="/validate-ip-address"
                    hx-target="#ip-address-validation"
                    hx-trigger="keyup changed delay:200ms"
                    name="ip-address"
                    type="text"
                />
                <span class="input-validation" id="ip-address-validation" />
            </form>
        </li>
        <li>
            <strong>CSS Transitions with <code>hx-swapping</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-swapping">https://htmx.org/attributes/hx-swapping</a>
            <ul id="css-transitions">
                <li>item 1</li>
                <li>item 2</li>
                <li>item 3</li>
            </ul>
            <p>
                When the button is clicked, add a new item to the bottom of the target list and remove the first item:
                <button
                    hx-target="css-transitions"
                    hx-swap=""
                >
                    Perform Action
                </button>
            </p>
        </li>
        <li>
            <strong>Form Resetting with <code>hx-indicator</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-indicator">https://htmx.org/attributes/hx-indicator</a>
            <p>
                ...
            </p>
        </li>
        <li>
            <strong>Active Search (type-ahead) with <code>hx-trigger</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-trigger">https://htmx.org/attributes/hx-trigger</a>
            <form action="post">
                <label for="search">Search</label>
                <input
                    id="search-term"
                    hx-trigger="keyup changed delay:200ms"
                    hx-post="/search"
                    hx-target="#search-results"
                    name="search-term"
                    size="{10}"
                />
                <ul id="search-results"></ul>
            </form>
        </li>
        <li>
            <strong>Optimistic content updates with <code>hx-????</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
            <p>
                ...
            </p>
        </li>
        <li>
            <strong>Pagination with <code>hx-????</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
            <p>
                ...
            </p>
        </li>
        <li>
            <strong>Infinite scroll with <code>hx-????</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
            <p>
                ...
            </p>
        </li>
        <li>
            <strong>Toggling a selection with <code>hx-????</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
            <p>
                ...
            </p>
        </li>
        <li>
            <strong>Polling with <code>hx-????</code></strong><br>
            <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
            <p>
                ...
            </p>
        </li>
        <li>
            <strong>Custom dialog with <code>hx-????</code></strong><br>
                <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
                <p>
                    ...
                </p>
        </li>
        <li>
            <strong>Adding headers to all requests with <code>htmx:configRequest</code></strong><br>
                <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
                <p>
                    ...
                </p>
        </li>
        <li>
            <strong>Click to Edit with <code>hx-????</code></strong><br>
             <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
             <p>
                ...
             </p>
        </li>
        <li>
            <strong>HTML and JSON with <code>hx-????</code></strong><br>
             <a herf="https://htmx.org/attributes/hx-????">https://htmx.org/attributes/hx-????</a>
             <code><pre>
app.get('/content', (c: Context) => {
    const content = get_content();

    // Match the client HTTP header "Accept: application/json"
    // Return `content` in JSON format
    const accept = c.req.header('accept');
    if (accept?.includes('application/json')) {
        return c.json(content);
    }

    // Return `content` in HTML format
    return c.html(
        &lt;ul id="list"&gt;
        {content.map(todo =&gt; (
            &lt;ListItem item={item} /&gt;
        ))}
        &lt;/ul&gt;
    );
});
            </pre></code>
        </li>
        <li>
            <strong>Lazy Loading with <code>hx-trigger</code></strong><br>
            <a href="https://htmx.org/attributes/hx-trigger/">https://htmx.org/attributes/hx-trigger/</a>
            <p>
                The following content was loaded using:<br/>
                <code>&lt;div hx-get="/lazy-loading.html" hx-trigger="revealed"&gt;&lt;/div&gt;</code>
                <hr/>
                <div hx-get="/lazy-loading.html" hx-trigger="revealed"></div>
                <hr/>
            </p>
        </li>
        <li>
            <p>
                <strong>Alpine.js</strong><br/>
                <a href="https://alpinejs.dev">https://alpinejs.dev</a><br/>
                Alpine is a JavaScript framework that uses custom HTML attributes to add dynamic behavior.
                Alpine is notable for its ease of use and reduced size compared to other libraries and frameworks.
            </p>
            <strong>Alpine.js using <code>x-data</code></strong><br>
            <a href="https://alpinejs.dev/directives/data">https://alpinejs.dev/directives/data</a>
            <hr/>
            <p>
                <div x-data="{open: false}">
                    <button @click="open = !open">Toggle</button>
                    <div x-show="open">Hello, World!</div>
                </div>
            </p>
            <hr/>
            <p>
                <div style="display: flex; gap: 1rem" x-data="{count: 0}">
                    <button @click="count--" :disabled="count === 0">-</button>
                    <span x-text="count"></span>
                    <button @click="count++" :disabled="count === 10">+</button>
                </div>
            </p>
            <hr/>
            <strong>Alpine.js using <code>x-for</code> and <code>x-if</code></strong><br>
            <a href="https://alpinejs.dev/directives/data">https://alpinejs.dev/directives/data</a><br/>
            <a href="https://alpinejs.dev/directives/for">https://alpinejs.dev/directives/for</a><br/>
            <a href="https://alpinejs.dev/directives/if">https://alpinejs.dev/directives/if</a><br/>
            <script>
                // Example of some function with data
                const color_data = function() {
                    return {
                        colors: [
                            {name: "blue", primary: true},
                            {name: "green", primary: false},
                            {name: "orange", primary: false},
                            {name: "purple", primary: false},
                            {name: "red", primary: true},
                            {name: "yellow", primary: true},
                        ],
                    };
                }
            </script>
            <div style="background-color: gray; width: 6rem; float: left; padding: 1rem; margin: 1rem 2rem 1rem 0" x-data="color_data">
                <template x-for="color in colors">
                    <template x-if="color.primary">
                        <div
                            :style="{color: color.name, fontSize: '2rem'}"
                            x-text="color.name" >
                        </div>
                    </template>
                </template>
            </div>
            <p style="font-style: italic;">
                &quot;The following example demonstrates using the `x-for` and `x-if` directives. Both can only be applied to HTML `template` elements. If items in an array used by `x-for` will be added, deleted, or reordered, the template element should include a key attribute that uses `x-bind` to specify a unique value for each array item. This enables Alpine to better manage updating the DOM.&quot;
            </p>
            <code><pre>
colors: [
    {name: "blue", primary: true},
    {name: "green", primary: false},
    {name: "orange", primary: false},
    {name: "purple", primary: false},
    {name: "red", primary: true},
    {name: "yellow", primary: true},
],
            </pre></code>
            <hr/>
            <strong>Alpine.js using <code>x-data</code> and <code>$data</code></strong><br>
            <a href="https://alpinejs.dev/directives/data">https://alpinejs.dev/directives/data</a><br/>
            <a href="https://alpinejs.dev/directives/text">https://alpinejs.dev/directives/text</a><br/>
            <a href="https://alpinejs.dev/directives/on">https://alpinejs.dev/directives/on</a><br/>
            <a href="https://alpinejs.dev/magics/data">https://alpinejs.dev/magics/data</a>

            <script>
                const incrementBoth = function(data) {
                    data.inner++;
                    data.outer++;
                }
            </script>
            <div x-data="{outer: 1}">
                <div>
                    outer = <span x-text="outer"></span>
                </div>
                <div x-data="{inner: 1}">
                    <div>
                        inner = <span x-text="inner"></span>
                    </div>
                    <button @click="incrementBoth($data)">Increment Both</button>
                </div>
            </div>
            <hr/>
        </li>
    </ul>

</body>
</html>